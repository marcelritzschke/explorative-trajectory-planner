<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explorative Trajectory Planner</title>
    <link rel="stylesheet" href="style/buttons.css">
    <link rel="stylesheet" href="style/style.css">
    <script src="utils/toggleSettingsButton.js"></script>
    <script src="bower_components/fabric.js/dist/fabric.js"></script>
    <script src="listener.js"></script>
    <script src="datatypes.js"></script>
    <script src="utils.js"></script>
    <script src="grid.js"></script>
    <script src="explorer.js"></script>
    <script src="view.js"></script>
    <script src="planner.js"></script>
    <script src="motion.js"></script>
    <script src="controller.js"></script>
    <script>
        function applySliderValue(element) {
            const value = document.getElementById(element).value;
            document.getElementById(element + 'Value').innerHTML = value;
        }
        
    </script>
</head>
<body onload="initializeView(); initializePlanner(); initializeMotion(); initializeController()">
    <header>

    </header>
    <section class="control-section">
        <div onclick="toggleSettings()">
            <label for="settingsToggle" id="settingsButton" class="settingsbutton">☰</label>
        </div>
        <div class="control">
            <div onclick="controller.step()" class="step-button"></div>
            <div onclick="controller.play()" class="play-button"></div>
            <div onclick="controller.pause()" class="pause-button"></div>
            <div onclick="controller.reset(), view.reset()" class="reset-button"></div>
        </div>
        <div id="timer" class="timer">00:00:000</div>
    </section>
    
    <section class="container">
        <input id="settingsToggle" type="checkbox" />
        <div class="settings">        
            <div class="inputText">
                <span style="font-size:x-small;">Scale (Pixels/Meter): </span>
                <span id="scaleValue" style="font-size:smaller;">20</span>
            </div>
            <div class="inputSlider">
                <input id="scale" type="range" min="10" max ="100" step="10"
                    value="20" onchange="view.updateScale();" oninput="applySliderValue('scale');" />
            </div>
            <div class="inputText">
                <span style="font-size:x-small;">Layers: </span>
                <span id="layerNumberValue" style="font-size:smaller;">2</span>
            </div>
            <div class="inputSlider">
                <input id="layerNumber" type="range" min="1" max ="4" step="1"
                    value="2" onchange="controller.updateLayerNumber()" oninput="applySliderValue('layerNumber');" />
            </div>
            <div class="inputText">
                <span style="font-size:x-small;">Base Frequency (s): </span>
                <span id="baseFrequencyValue" style="font-size:smaller;">0.05</span>
            </div>
            <div class="inputSlider">
                <input id="baseFrequency" type="range" min=".01" max =".1" step=".01"
                    value=".05" onchange="controller.updateBaseFrequency()" oninput="applySliderValue('baseFrequency');" />
            </div>
            <div class="inputText">
                <span style="font-size:x-small;">Exploration Frequency (s): </span>
                <span id="explorationFrequencyValue" style="font-size:smaller;">1.5</span>
            </div>
            <div class="inputSlider">
                <input id="explorationFrequency" type="range" min=".1" max ="3" step=".1"
                    value="1.5" onchange="controller.updateExplorationFrequency()" oninput="applySliderValue('explorationFrequency');" />
            </div>
            <div class="inputText">
                <span style="font-size:x-small;">Layer Length (s): </span>
                <span id="timestepValue" style="font-size:smaller;">2</span>
            </div>
            <div class="inputSlider">
                <input id="timestep" type="range" min=".5" max ="5" step=".5"
                    value="2" onchange="controller.updateTimestep()" oninput="applySliderValue('timestep');" />
            </div>
            <div class="inputText">
                <span style="font-size:x-small;">Interpolation (s): </span>
                <span id="intertimeValue" style="font-size:smaller;">0.2</span>
            </div>
            <div class="inputSlider">
                <input id="intertime" type="range" min=".05" max ="1" step=".05"
                    value=".2" onchange="controller.updateIntertime()" oninput="applySliderValue('intertime');" />
            </div>
            <div class="inputText" style="font-size:x-small;">Velocities (m/s)</div>
            <div class="inputSlider">
                <input id="velocities" type="controls" value="0 1" onchange="controller.updateVelocities()"/>
            </div>
            <div class="inputText" style="font-size:x-small;">Steering Angles (°)</div>
            <div class="inputSlider">
                <input id="steeringAngles" type="controls" value="-30 -15 0 15 30"
                    width="200" onchange="controller.updateSteeringAngles()"/>
            </div>
            <div class="inputText" style="font-size:x-small;">Obstacles</div>
            <div class="inputSlider"> 
                <input id="obstacles" type="text" value="1" type="text" onchange="controller.updateObstacles()"/>
            </div>
            <div class="inputText" style="font-size:x-small;">Draw Exploration</div>
            <div class="inputSlider">
                <input id="drawExploration" type="checkbox" checked onchange="controller.updateDrawExploration()"/>
            </div>
        </div>
        <div>
            <canvas id="mainView" class="canvas"></canvas>
        </div>
    </section>
    <footer></footer>
</body>
</html>